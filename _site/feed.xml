<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="http://192.168.101.44:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://192.168.101.44:4000/" rel="alternate" type="text/html" /><updated>2020-07-12T23:17:10+05:30</updated><id>http://192.168.101.44:4000/feed.xml</id><title type="html">fenil suchak</title><subtitle>Hi my name is</subtitle><entry><title type="html">DNS Cache Everywhere</title><link href="http://192.168.101.44:4000/sugarcoated/tech/dns-cache.html" rel="alternate" type="text/html" title="DNS Cache Everywhere" /><published>2020-07-03T00:00:00+05:30</published><updated>2020-07-03T00:00:00+05:30</updated><id>http://192.168.101.44:4000/sugarcoated/tech/dns-cache</id><content type="html" xml:base="http://192.168.101.44:4000/sugarcoated/tech/dns-cache.html">&lt;quote&gt; &quot;Follow the links and you will attain Nirvana&quot; &lt;br&gt; &lt;auth&gt;- Maybe Kurt Cobain &lt;/auth&gt;&lt;/quote&gt;

&lt;p&gt; One Wednesday morning, I wake up and for some nostalgia I take by my Mac that I have donated to my sister, switch it on and forget to press-hold option key for boot menu to show up and sure enough it boots directly to Ubuntu which I have dual booted my Mac with (yeah I know Linux on Mac wtf, but I found I'm not the only one you &lt;a href = &quot;https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-5.3-MacBook-Key-Trackpads&quot;&gt;see&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt; So while I was on it, I realized that my internet page response speed was quite better compared to Manjaro which is on my regular machine. On Manjaro for every gapped search I did had a weird delay in loading the page, even the websites that I visited just a while ago loaded slowly. I used to curse my ISP for the stupid slow time it took to load a page and now I realise it's my machines fault? No, can't be. It scratched that part of my mind again and I went to hunting. I suspected it was something to do with &lt;a href = &quot;https://www.youtube.com/watch?v=uOfonONtIuk&quot;&gt; DNS &lt;/a&gt;. As I was told my networks prof(one of the few profs I like) that usually DNS issues are first to diagnose. So I dig it. &lt;/p&gt;


&lt;p&gt; These are on my ubuntu(Mac) machine dig outputs, along with time.&lt;/p&gt;

&lt;img src = &quot;/assets/img/pic_a.png&quot; alt = &quot;Some Shit&quot;&gt;
&lt;p&gt;&lt;/p&gt;
&lt;img src = &quot;/assets/img/pic_b.png&quot; alt = &quot;Some Shit&quot;&gt;

&lt;p&gt; So this is fine, on the first request you can see the Query time, which is 980 ms and the real time ie. actual time taken for command to execute (time in &lt;a href=&quot;https://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/5_CPU_Scheduling.html&quot;&gt;time in cpu + time in blocking state&lt;/a&gt;) is 5.some seconds. The second time when you run the same query, you have a &lt;a href =&quot;https://en.wikipedia.org/wiki/Daemon_(computing)&quot;&gt;daemon&lt;/a&gt; process running (background process) called &lt;a href = &quot;http://manpages.ubuntu.com/manpages/bionic/man8/systemd-resolved.service.8.html&quot;&gt;systemd-resolved&lt;/a&gt; (sucks at times though) which caches your dns query so the next time you do the same query you dont have to wait for it to go and resolve at top level dns servers around the world but be able to find it locally stored in the RAM which will also avoid the process to go into blocking state, saves you some fraction there too. So, this is how exactly your dns daemon process should be caching your dns resolution queries.&lt;/p&gt;


&lt;p&gt; Coming to back to Manjaro. So I did this and to my correct guess there was no dns caching going on. Below you can see all of my requests are going to either &lt;code style=&quot;background-color:white;&quot;&gt;114.114.114.114 &lt;/code&gt;(its in fucking china) or &lt;code style=&quot;background-color:white;&quot;&gt;8.8.8.8&lt;/code&gt; (Google Public DNS) or &lt;code style=&quot;background-color:white;&quot;&gt;192.168.101.1&lt;/code&gt;(my local router) and looking at the time it took (you can find all the listed dns servers in your /etc/resolv.conf file), it was clear that no caching is done at os level. [drill is the big brother of dig so dont get mad]&lt;/p&gt;

&lt;img src =  &quot;/assets/img/before_dns1.png&quot;&gt; 
&lt;img src =  &quot;/assets/img/before_dns2.png&quot;&gt; 

&lt;p&gt; Time to fix this now, enter &lt;a href = &quot;https://wiki.debian.org/dnsmasq&quot;&gt;dnsmasq&lt;/a&gt; an open source tool for dns caching, I had to manually configure it and it's one of the things I love, it puts me in a meditative state. I didn't know I already had systemd-resolved at the time and that I just had to systemctl it but fuck it setting up dnsmasq was fun. So I did it with some help from &lt;a href=&quot;https://wiki.archlinux.org/index.php/dnsmasq&quot;&gt;arch wiki.&lt;/a&gt;&lt;/p&gt;


&lt;p&gt; So fast forward and configured. Now everytime I query something the first query goes to which ever top DNS server it can find the resolution and from the second time onwards it is picked from my os cache with almost zero lookup time. See below. &lt;/p&gt;
&lt;img src = &quot;/assets/img/after_dns1.png&quot;&gt;
&lt;img src = &quot;/assets/img/after_dns2.png&quot;&gt;


&lt;p&gt; Another place where your DNS cache gets stored is your browser. Your browser has also a cache of its own, on a miss it looks up your os level cache, then your router and so on.. Browser caches have a small ttl (time to live), default for Firefox is 120 seconds (can track your browser cache at &lt;code style=&quot;background-color:white;&quot;&gt;about:networking#dns&lt;/code&gt;) and recent chrome versions apparently dont show browser cache, you can obviously configure the ttl to a high value but then browsers already eat up a lot of my RAM so I refuse to do that.&lt;/p&gt;

&lt;p&gt; Use the below command to check if systemd-resolved is running&lt;/p&gt;
&lt;p&gt;&lt;code style=&quot;background-color:white;&quot;&gt;systemctl status systemd-resolved&lt;/code&gt;&lt;/p&gt;
&lt;p&gt; if not running then do &lt;code style=&quot;background-color:white;&quot;&gt;systemctl start systemd-resolved &lt;/code&gt; or you can download and checkout dnsmasq as well, as I've done on my machine.&lt;/p&gt;


&lt;p&gt;Ok bye.&lt;/p&gt;</content><author><name>Fenil Suchak</name></author><category term="tech" /><summary type="html">&quot;Follow the links and you will attain Nirvana&quot; - Maybe Kurt Cobain</summary></entry><entry><title type="html">Student’s Block</title><link href="http://192.168.101.44:4000/sugarcoated/random/students-block.html" rel="alternate" type="text/html" title="Student's Block" /><published>2020-05-06T00:00:00+05:30</published><updated>2020-05-06T00:00:00+05:30</updated><id>http://192.168.101.44:4000/sugarcoated/random/students-block</id><content type="html" xml:base="http://192.168.101.44:4000/sugarcoated/random/students-block.html">&lt;quote&gt; &quot;It's not aimed at anyone it's just escaping on the run&quot; &lt;br&gt; &lt;auth&gt;- Bob Dylan, Mr. Tambourine Man &lt;/auth&gt;&lt;/quote&gt;
&lt;p&gt;Once upon a time not long ago (in 2016), I thought that I was onto something but It's been four years of college and I'm convinced that I've been completely transformed into a non-doer. I don't take action unless I'm told to or have a deadline. Procrastination has become the universal truth, and for some reason sounds cool these days. I only function at d - ε before the deadline. This assignments and regular lab culture have made me sick, there have been very few assignments which made me want to do it because at the end I built something and yeah building is fun and it's real. If you tell me to look up stuff and write your understanding of it, fuck no I'm not going to do it, I'll borrow someone's work but not do it. I hate fuckin learning that way, it's toxic to me, it makes me a mere consumer and I hate that thought. It does not reflect me, and the evaluator just assigns an integer and shoves it away. What the fuck is the point? How can that work make you feel any better, it's miserable. Do you guys agree?&lt;/p&gt;
&lt;p&gt;Sure, those integers have a long term monetary value and even the market does value them immensely, but I just can't make pretend that it's ok for me, I tried, a lot. It puts me in a very consumption mindset and that things in life will be asked explicitly and I just need to fill in time. It's hard to switch this mindset when no one asks you to do it when there are no deadlines, this model will straight fail there. I know, I know, this model is made so that we are deliverable to the corporates and higher education. But I'm done, college ended on 29th April and there's just a final exam left. I'm done with education after that, no more. I can't live this lifestyle of just learning and not producing.&lt;/p&gt;
&lt;p&gt;Pessimism has been inevitable in college. I don't remember the last time I took any risk. The herd mentality has been so strong that I never bothered to look beyond what was required. I started with big dreams that I would have built something by the end of my 4th year (a personal OS was the idea) that would be recognized by peeps and would be hired based on that thing. But I couldn't, I didn't even try hard. I felt like it wasn't possible or worth it. Look at me now, doing interviewbit and gfg and preparing for placements. But over the last few months I've been thinking, is this all there is? Then why even put up a fight?. I still have that fire inside me and I've decided to start on my own by my 25th birthday. This target to chase would push me to see technology from all directions which until now I have been looking just through a consumers view and also to try out various ideas that I had documented but shoved away.&lt;/p&gt;
&lt;p&gt;So yeah this is it for this piece, I have got a six-month internship at a startup ahead of me to keep me busy till December, which hopefully will help me remove this &lt;strong&gt;Student's Block&lt;/strong&gt; from my mind and body.&lt;/p&gt;</content><author><name>Fenil Suchak</name></author><category term="random" /><summary type="html">&quot;It's not aimed at anyone it's just escaping on the run&quot; - Bob Dylan, Mr. Tambourine Man Once upon a time not long ago (in 2016), I thought that I was onto something but It's been four years of college and I'm convinced that I've been completely transformed into a non-doer. I don't take action unless I'm told to or have a deadline. Procrastination has become the universal truth, and for some reason sounds cool these days. I only function at d - ε before the deadline. This assignments and regular lab culture have made me sick, there have been very few assignments which made me want to do it because at the end I built something and yeah building is fun and it's real. If you tell me to look up stuff and write your understanding of it, fuck no I'm not going to do it, I'll borrow someone's work but not do it. I hate fuckin learning that way, it's toxic to me, it makes me a mere consumer and I hate that thought. It does not reflect me, and the evaluator just assigns an integer and shoves it away. What the fuck is the point? How can that work make you feel any better, it's miserable. Do you guys agree? Sure, those integers have a long term monetary value and even the market does value them immensely, but I just can't make pretend that it's ok for me, I tried, a lot. It puts me in a very consumption mindset and that things in life will be asked explicitly and I just need to fill in time. It's hard to switch this mindset when no one asks you to do it when there are no deadlines, this model will straight fail there. I know, I know, this model is made so that we are deliverable to the corporates and higher education. But I'm done, college ended on 29th April and there's just a final exam left. I'm done with education after that, no more. I can't live this lifestyle of just learning and not producing. Pessimism has been inevitable in college. I don't remember the last time I took any risk. The herd mentality has been so strong that I never bothered to look beyond what was required. I started with big dreams that I would have built something by the end of my 4th year (a personal OS was the idea) that would be recognized by peeps and would be hired based on that thing. But I couldn't, I didn't even try hard. I felt like it wasn't possible or worth it. Look at me now, doing interviewbit and gfg and preparing for placements. But over the last few months I've been thinking, is this all there is? Then why even put up a fight?. I still have that fire inside me and I've decided to start on my own by my 25th birthday. This target to chase would push me to see technology from all directions which until now I have been looking just through a consumers view and also to try out various ideas that I had documented but shoved away. So yeah this is it for this piece, I have got a six-month internship at a startup ahead of me to keep me busy till December, which hopefully will help me remove this Student's Block from my mind and body.</summary></entry></feed>